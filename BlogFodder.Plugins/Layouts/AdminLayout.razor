@inherits LayoutComponentBase
<MudThemeProvider/>
<MudDialogProvider/>
<MudSnackbarProvider/>

<MudLayout>
    <MudAppBar Elevation="1">
        <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@((e) => DrawerToggle())"/>
        <MudSpacer/>
        @*@AdminTopBar*@
        <MudIconButton Icon="@Icons.Material.Filled.MoreVert" Color="Color.Inherit" Edge="Edge.End"/>
    </MudAppBar>
    <MudDrawer @bind-Open="_drawerOpen" Elevation="2">
        <MudDrawerHeader>
            <MudText Typo="Typo.h5" Class="mt-1">BlogFodder</MudText>
        </MudDrawerHeader>
       <MudNavMenu>
            <MudText Typo="Typo.body2" Class="px-4 mud-text-secondary">Pages</MudText>
           <MudDivider Class="my-2"/>
           <MudText Typo="Typo.body2" Class="px-4 mud-text-secondary">Plugins</MudText>
            <Navigation />
            @*<MudNavGroup Title="Settings" Expanded="true">
                <MudNavLink Href="/users">Users</MudNavLink>
                <MudNavLink Href="/security">Security</MudNavLink>
            </MudNavGroup>*@
       </MudNavMenu>
    </MudDrawer>
    <MudMainContent>
        <CascadingValue Value="this">
            @Body
        </CascadingValue>
    </MudMainContent>
</MudLayout>

@code {
    RenderFragment AdminNavigation => _adminNavigation?.ChildContent!;
    RenderFragment AdminTopBar => _adminTopBar?.ChildContent!;
    AdminNavigation? _adminNavigation;
    AdminTopBar? _adminTopBar;
    bool _drawerOpen = true;
    public void SetAdminNavigation(AdminNavigation? adminNavigation)
    {
        _adminNavigation = adminNavigation;
        Update();
    }
    public void SetAdminTopBar(AdminTopBar? adminTopBar)
    {
        _adminTopBar = adminTopBar;
        Update();
    }
    void DrawerToggle()
    {
        _drawerOpen = !_drawerOpen;
    }

    public void Update() => StateHasChanged();
}